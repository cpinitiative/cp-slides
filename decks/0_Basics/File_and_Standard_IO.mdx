import { jsx } from 'theme-ui'
import { myTheme } from "../../src/components/mdx-deck/customTheme";
import ListSteps from "../../src/components/mdx-deck/ListSteps";
import { CSTheme } from "../../src/components/mdx-deck/custom-codesurfer-theme";
import { CodeSurfer, Step } from "code-surfer";
import CodeSurferColumns from "../../src/components/mdx-deck/CodeSurferColumns";
import Content from "../../src/components/mdx-deck/Content";
import TightParagraphs from "../../src/components/mdx-deck/TightParagraphs";
import "prismjs/components/prism-java";

export const theme = myTheme;

# File and Standard IO

https://usaco.guide/general/io

---

## Standard IO

<Content>

- In most websites (such as CodeForces and CSES), input and output are standard.
- There are two main ways to read standard input, either using `Scanner` or `BufferedReader`.
- Similarly, there are two main ways to write standard output, either using the `System` class or `PrintWriter`.

</Content>

---

## Scanner

<Content>

- The first and simplest way to read input is using `Scanner`.
- However, `Scanner` is very slow when handling large input files, so it should be avoided during a contest.
- Here is a sample program using `Scanner`.

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="Scanner Example"
import java.io.*;
import java.util.*;

public class template {
    public static void main(String[] args) throws IOException {
        // Input:
        // 12 243.92
        // 100000000000000
        // Hello!
        Scanner r = new Scanner(System.in); // Creating a Scanner object
        int a = r.nextInt(); // Reading in an int
        double b = r.nextDouble(); // Reading in a double
        long c = r.nextLong(); // Reading in a long

        // .nextInt(), .nextDouble(), and .nextLong() do not advance the reader to the next line
        // and .nextLine() reads the current line
        // This line of code serves the purpose of advancing the reader to the next line
        r.nextLine();

        String d = r.nextLine(); // Reading in a line
    }
}
```

</CodeSurfer>

---

## BufferedReader

<Content>

- The second way to read input is using `BufferedReader`.
- This method is quick enough for the majority of contests, so `BufferedReader` is preferred over `Scanner`.
- Here is a sample program using `BufferedReader`.

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="BufferedReader Example"
import java.io.*;
import java.util.*;

public class template {
    public static void main(String[] args) throws IOException {
        // Input:
        // Hello
        // 1
        // 1.0
        // 100000000000000

        // Creating a BufferedReader object
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));

        String a = in.readLine(); // Reading in a line

        // Integer.parseInt() converts the line into an int (the line should only have one int)
        int a = Integer.parseInt(in.readLine())

        // Double.parseDouble() converts the line into a double
        double b = Double.parseDouble(in.readLine());

        // Long.parseLong() converts the line into a long
        long c = Long.parseLong(in.readLine());
    }
}
```

</CodeSurfer>

---

## StringTokenizer

<Content>

- In the example program for `BufferedReader`, ints, doubles, and longs could only be read if they were on a single line.
- Using the `StringTokenizer` class, it is possible to read in ints, doubles, and longs **on the same line**.
- The `StringTokenizer` variable must be reinstantiated for every line.
- Here is a sample program using `BufferedReader` and `StringTokenizer`.

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="BufferedReader and StringTokenizer Example"
import java.io.*;
import java.util.*;

public class template {
    public static void main(String[] args) throws IOException {
        // Input:
        // 1
        // 1 1.0 100000000000000

        // Creating a BufferedReader object
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));

        // Reading in an int on a line by itself
        int a = Integer.parseInt(in.readLine());

        // Creating a StringTokenizer object that reads and stores a line
        StringTokenizer token = new StringTokenizer(in.readLine());

        // Reading in an int on the line stored by the StringTokenizer
        int b = Integer.parseInt(token.nextToken());

        // Reading in a double on the line stored by the StringTokenizer
        int c = Double.parseDouble(token.nextToken());

        // Reading in a long on the line stored by the StringTokenizer
        long d = Long.parseLong(token.nextToken());

        // Reinstantiating the StringTokenizer object while reading and storing the next line
        token = new StringTokenizer(in.readLine());
    }
}
```

</CodeSurfer>

---

## InputReader

<Content>

- If using `BufferedReader` and `StringTokenizer` seems tedious, one can create a custom class to simplify code.
- Here is a sample custom class called `InputReader`.

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="InputReader"
import java.io.*;
import java.util.*;

public class template {
    static class InputReader {
        BufferedReader reader;
        StringTokenizer tokenizer;
        public InputReader(InputStream stream) {
            reader = new BufferedReader(new InputStreamReader(stream), 32768);
            tokenizer = null;
        }
        String next() { // reads in the next string
            while (tokenizer == null || !tokenizer.hasMoreTokens()) {
                try {
                    tokenizer = new StringTokenizer(reader.readLine());
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
            return tokenizer.nextToken();
        }
        public int nextInt() { return Integer.parseInt(next()); } // reads in the next int
        public long nextLong() { return Long.parseLong(next()); } // reads in the next long
        public double nextDouble() { return Double.parseDouble(next()); } // reads in the next double
    }
    static InputReader r = new InputReader(System.in);
    public static void main(String[] args) throws IOException {
        // Input:
        // 1
        // 1.0 100000000000000
        int a = r.nextInt(); // Reading in an int
        double b = r.nextDouble(); // Reading in a double
        long c = r.nextLong(); // Reading in a long
    }
}
```

</CodeSurfer>

---

## System Class

<Content>

- The first way to write output is using the `System` class.
- "out" is a field that is part of the `System` class and is the "standard" output stream.
- The statement "System.out.println()" prints the provided parameters and then moves onto the next line.
- The statement "System.out.print()" only prints the provided parameters.
- The `System` class is fairly slow when printing large amounts of data, so it should be avoided.

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="System Class Example"
import java.io.*;
import java.util.*;

public class template {
    public static void main(String[] args) throws IOException {
        // Output:
        // 1
        // Bye 100
        System.out.println(1); // Prints "1" and moves to next line
        System.out.print("Bye ") // Prints "Bye "
        System.out.println(100); // Prints "100" and moves to next line
    }
}
```

</CodeSurfer>

---

## PrintWriter

<Content>

- The second way to write output is using `PrintWriter`.
- Using `PrintWriter` is similar to using the `System` class.
- This method of writing output is faster and preferred for contests.

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="PrintWriter Example"
import java.io.*;
import java.util.*;

public class template {
    public static void main(String[] args) throws IOException {
        // Output:
        // 1
        // Bye 100
        PrintWriter pw = new PrintWriter(System.out);
        pw.println(1); // Prints "1" and moves to next line
        pw.print("Bye ") // Prints "Bye "
        pw.println(100); // Prints "100" and moves to next line
    }
}
```

</CodeSurfer>

---

## Example

[CSES Weird Algorithm](https://cses.fi/problemset/task/1068)

<Content>

**Problem Statement**: Simulate the following algorithm until n is 1:

- If n is even, the divide n by two
- if n is odd, multiply n by three and add one.

</Content>

---

## Solution

<ListSteps>

- Do exactly what the problem statement says!

</ListSteps>

https://usaco.guide/general/io#example-solution---weird-algorithm

---

## Code Along!

https://repl.it/

---

<CodeSurfer theme={CSTheme}>

```java title="Weird Algorithm Solution"
import java.io.*;
import java.util.*;

public class template {
    static class InputReader {
        BufferedReader reader;
        StringTokenizer tokenizer;
        public InputReader(InputStream stream) {
            reader = new BufferedReader(new InputStreamReader(stream), 32768);
            tokenizer = null;
        }
        String next() { // reads in the next string
            while (tokenizer == null || !tokenizer.hasMoreTokens()) {
                try {
                    tokenizer = new StringTokenizer(reader.readLine());
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
            return tokenizer.nextToken();
        }
        public int nextInt() { return Integer.parseInt(next()); } // reads in the next int
        public long nextLong() { return Long.parseLong(next()); } // reads in the next long
        public double nextDouble() { return Double.parseDouble(next()); } // reads in the next double
    }
    static InputReader r = new InputReader(System.in);
    static PrintWriter pw = new PrintWriter(System.out);
    public static void main(String[] args) {
        long x = r.nextLong();

        // todo: Solve the problem!

        pw.close(); // flushes the output once printing is done
    }
}
```


```java title="Weird Algorithm Solution"
import java.io.*;
import java.util.*;

public class template {
    static class InputReader {
        BufferedReader reader;
        StringTokenizer tokenizer;
        public InputReader(InputStream stream) {
            reader = new BufferedReader(new InputStreamReader(stream), 32768);
            tokenizer = null;
        }
        String next() { // reads in the next string
            while (tokenizer == null || !tokenizer.hasMoreTokens()) {
                try {
                    tokenizer = new StringTokenizer(reader.readLine());
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
            return tokenizer.nextToken();
        }
        public int nextInt() { return Integer.parseInt(next()); } // reads in the next int
        public long nextLong() { return Long.parseLong(next()); } // reads in the next long
        public double nextDouble() { return Double.parseDouble(next()); } // reads in the next double
    }
    static InputReader r = new InputReader(System.in);
    static PrintWriter pw = new PrintWriter(System.out);
    public static void main(String[] args) {
        // note how we used long, since int would overflow!
        long x = r.nextLong();

        while (x != 1) {
            pw.print(x+" ");
            if (x%2 == 0) x /= 2;
            else x = 3*x+1;
        }
        pw.print(x);

        pw.close(); // flushes the output once printing is done
    }
}
```

</CodeSurfer>

---

## File IO

<Content>

- USACO requires reading input from and writing output to a file.
- The main way to do file io is using `BufferedReader` and `PrintWriter`.
- File io is essentially the same as standard io, but just changing the instantiation of `BufferedReader` and `PrintWriter`.

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="File IO"
import java.io.*;
import java.util.*;

public class template {
    public static void main(String[] args) throws IOException {
        // Input:
        // 1
        // Output:
        // 1

        // change file.in to name of input file
        BufferedReader br = new BufferedReader(new FileReader("file.in"));
        // change file.out to name of output file
        PrintWriter pw = new PrintWriter(new FileWriter("file.out"));

        int a = Integer.parseInt(br.readLine()); // Reading in an int
        pw.print(a); // Printing "1"
    }
}
```

</CodeSurfer>

---

## File IO with InputReader

<Content>

- We can also adjust `InputReader` to accommodate file io!
- Note: The statement

  ```java
  PrintWriter pw = new PrintWriter(new BufferedWriter(new FileWriter("problemname.out")));
  ```

  is effectively the same as

  ```java
  PrintWriter pw = new PrintWriter(new FileWriter("problemname.out"));
  ```

</Content>

---

<CodeSurfer theme={CSTheme}>

```java title="File IO"
import java.util.*;
import java.io.*;

public class template {
    static class InputReader {
        BufferedReader reader;
        StringTokenizer tokenizer;
        public InputReader() throws FileNotFoundException {
            reader = new BufferedReader(new FileReader("problemname.in"));
            tokenizer = null;
        }
        String next() {
            while (tokenizer == null || !tokenizer.hasMoreTokens()) {
                try {
                    tokenizer = new StringTokenizer(reader.readLine());
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
            return tokenizer.nextToken();
        }
        public int nextInt() { return Integer.parseInt(next()); }
        public long nextLong() { return Long.parseLong(next()); }
        public double nextDouble() { return Double.parseDouble(next()); }
    }
    public static void main(String[] args) throws IOException {
        InputReader r = new InputReader();
        PrintWriter pw = new PrintWriter(new FileWriter("problemname.out"));
        
        // YOUR CODE HERE
        
        pw.close(); // flushes the output once printing is done
    }
}
```

</CodeSurfer>

---

## Example

[USACO 2015 Dec Bronze - Fence Painting](http://www.usaco.org/index.php?page=viewproblem2&cpid=567)

<Content>

**Problem Statement**: Bessie and Farmer John both paint an interval of a fence (treated as a number line).
Given the two intervals, find the total length of the fence that is painted.

</Content>

---

## Solution

<ListSteps>

- Endpoints are in the range [0, 100]
- Create an array of length 100 that stores whether or not each segment of length 1 is painted.
- Simply go through both intervals and mark all corresponding segments as painted.
- Loop through array and count up the number of painted segments.
- Note: You can also solve in O(1) with math!

</ListSteps>

https://usaco.guide/general/io#example-solution---fence-painting

---

<CodeSurfer theme={CSTheme}>

```java title="Fence Painting Solution"

import java.io.*;
import java.util.*;

public class paintSol { // must be declared in paintSol.java
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader("paint.in"));
        PrintWriter pw = new PrintWriter(new FileWriter("paint.out"));
        
        int[] cover = new int[100];

        StringTokenizer st = new StringTokenizer(br.readLine());
        int a = Integer.parseInt(st.nextToken()), b = Integer.parseInt(st.nextToken());
        st = new StringTokenizer(br.readLine());
        int c = Integer.parseInt(st.nextToken()), d = Integer.parseInt(st.nextToken());

        for (int i = a; i < b; i++) cover[i] = 1;
        for (int i = c; i < d; i++) cover[i] = 1;
        int ans = 0;
        for (int i = 0; i < 100; i++) ans += cover[i];
        pw.println(ans);
        pw.close(); // make sure to include this line -- flushes the output.
    }
}

```
```diff title="Questions?"
```

</CodeSurfer>

---
